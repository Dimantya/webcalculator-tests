Общее описание тестируемого приложения: 

Приложение webcalculator.exe позволяет выполнять арифметические операции с целыми числами на стороне сервера и возвращать их результат клиенту. 
Взаимодействие между клиентской и серверной частью производится посредством HTTP-API.

С помощью приложения можно вычислить результат следующих арифметических операций
* Сложение двух чисел
* Умножение двух чисел
* Целочисленное деление
* Получение остатка от деления

На входные значения налагаются следующие ограничения: 
* Только целые числа
* Каждое число должно быть в диапазоне от -2147483648 до 2147483647

В приложении реализован минимальный интерфейс командной строки. С помощью аргументов запуска можно управлять состоянием приложения из консоли (запуск; остановка; перезапуск), выводить содержимое лог файла на экран консоли. 
API интерфейс приложения:
* После того, как приложение запущено (см. Управление приложением), клиент может обратится к нему по средствам HTTP-API по адресу и порту, указанному при запуске приложения
* Допустимы следующие типы запросов: POST/GET/OPTIONS
* Для обращения к необходимой api-функции (далее задаче) необходимо указать в адресе запроса её имя в следующем формате: http://host:port/api/имя_задачи

Пример адреса запроса: http://192.168.7.54:12345/api/addition
* Для задач типа POST тело запроса должно содержать json с ключами “x” и “y”, и значениями типа integer. 
Пример тела запроса: {“x”:42, “y”:24}

Задача - Описание - Тип запросаstate - Проверка состояния сервера - GET 
addition - Сложение x и y - POST 
multiplication - Умножение x и y - POST 
division - Деление на цело x на y - POST 
remainder - Остаток от деления x на y - POST

Формат ответа и коды ошибок:
* Ответ на задачу state должен иметь формат {'statusCode': 0, 'state': 'OК'}
* Ответ на остальные задачи {"statusCode": 0, "result": результат операции(int)}
* В случае ошибки при обработке запроса формат {"statusCode": код ошибки(int), "statusMessage": сообщение об ошибке}

Код ошибки - Описание ошибки1 Ошибка вычисления2 Не хватает ключей в теле запроса3 Одно из значений не является целым числом4 Превышен размер одного из значений5 Неправильный формат тела запроса0 Все хорошо
Управление приложением:

* Запуск приложения осуществляется с помощью команды start с указанием дополнительных аргументов host и port. В случае если указан только адрес хоста, будет использован порт по умолчанию (17678). Если адрес хоста так же не указан будет использован адрес по умолчанию (127.0.0.1)
Пример запуска на локальной машине: webcalculator.exe start localhost 5413
* Остановка приложения осуществляется командной stop.
* Команда restart осуществляет перезапуск приложения. После выполнения команды приложение продолжает работать на том же адресе и порту, что и до перезапуска
* Команда show_log выводит на экран содержимое лог файла приложения
* При указании аргумента –h / --help выводится краткая справка по использованию приложения
      
Журнал приложения:
* Файл журнала приложения хранится в %localappdata%\webcalculator\webcalculator.log
* Жестких требований на форматирование и содержание файла журнала не налагается
* Содержимое журнала должно соответствовать действительности и быть достаточным для анализа возникающих проблем


      Результаты тестов:
      
      C:\Users\LazyManHunter\PycharmProjects\infotecks 37>pytest test.py -s
      ========================================================================================================= test session starts =========================================================================================================
      platform win32 -- Python 3.8.1, pytest-6.2.5, py-1.11.0, pluggy-1.0.0
      rootdir: C:\Users\LazyManHunter\PycharmProjects\infotecks 37
      collected 7 items                                                                                                                                                                                                                      
      
      test.py
      
      <<Проверка запуска, остановки и рестарта приложения webcalculator.exe>>
      
      
      <Старт на стандартном адресе и порте 127.0.0.1:17678>
      Запуск Веб-калькулятора на 127.0.0.1:17678
      Веб-калькулятор запущен на 127.0.0.1:17678
      
      
      <Попытка повторного старта при уже запущенном приложении>
      Сервер уже запущен
      
      
      <Перезапуск работы приложения, проверка сохранения адреса и порта с прошлого запуска: 127.0.0.1:17678>
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      Запуск Веб-калькулятора на 127.0.0.1:17678
      Веб-калькулятор запущен на 127.0.0.1:17678
      
      
      <Остановка работы приложения>
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      
      
      <Старт на стандартном адресе 127.0.0.1 и порте 5413>
      Запуск Веб-калькулятора на localhost:5413
      Веб-калькулятор запущен на localhost:5413
      
      
      <Перезапуск работы приложения, проверка сохранения адреса и порта с прошлого запуска: 127.0.0.1: 5413>
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      Запуск Веб-калькулятора на localhost:5413
      Веб-калькулятор запущен на localhost:5413
      
      
      <Остановка работы приложения>
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      
      
      <Старт приложения на адресе 127.2.5.10 и порте 5413>
      Запуск Веб-калькулятора на 127.2.5.10:5413
      Веб-калькулятор запущен на 127.2.5.10:5413
      
      
      <Перезапуск работы приложения, проверка сохранения адреса и порта с прошлого запуска: 127.2.5.10 и порте 5413>
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      Запуск Веб-калькулятора на 127.2.5.10:5413
      Веб-калькулятор запущен на 127.2.5.10:5413
      
      
      <Остановка работы приложения>
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      .
      
      <<Проверка get-запроса о статусе сервера>>
      Запуск Веб-калькулятора на 127.0.0.1:17678
      Веб-калькулятор запущен на 127.0.0.1:17678
      
      
      Состояние сервера:  {'statusCode': 0, 'state': 'OК'}
      .
      
      <<Проверка post-запроса для операции сложения>>
      
      
      Результат сложения с допустимыми значениями х=42 у=24 -  {'statusCode': 0, 'result': 66}
      Результат сложения с числом больше диапазона х=42 у=21474836478 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат сложения с числом меньше диапазона х=42 у=-2147483649 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат сложения с дробным числом х=42 у=24.5 -  {'statusCode': 3, 'statusMessage': 'Значения параметров должны быть целыми'}
      Результат сложения пограничных чисел х=-2147483648 у=21474836447 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат сложения чисел меньше предела х=-2147483647 у=2147483646 -  {'statusCode': 0, 'result': -1}
      .
      
      <<Проверка post-запроса для операции умножения>>
      
      
      Результат умножения с допустимыми значениями х=42 у=24 -  {'statusCode': 0, 'result': 1008}
      Результат умножения с числом больше диапазона х=42 у=21474836478 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат умножения с числом меньше диапазона х=42 у=-2147483649 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат умножения с дробным числом х=42 у=24.5 -  {'statusCode': 3, 'statusMessage': 'Значения параметров должны быть целыми'}
      Результат умножения пограничных чисел х=-2147483648 у=21474836447 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат умножения чисел меньше предела -  {'statusCode': 0, 'result': -4611686011984936962}
      .
      
      <<Проверка post-запроса для операции деления>>
      
      
      Результат деления с допустимыми значениями х=42 у=24 -  {'statusCode': 0, 'result': 1}
      Результат деления с числом больше диапазона х=42 у=21474836478 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат деления с числом меньше диапазона х=42 у=-2147483649 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат деления с дробным числом х=42 у=24.5 -  {'statusCode': 3, 'statusMessage': 'Значения параметров должны быть целыми'}
      Результат деления пограничных чисел х=-2147483648 у=21474836447 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат деления чисел меньше предела х=-2147483647 у=2147483646 -  {'statusCode': 0, 'result': -2}
      Результат деления ноль х=42 у=0 -  {'statusCode': 8, 'statusMessage': 'Ошибка вычисления'}
      .
      
      <<Проверка post-запроса для операции остатка от деления>>
      
      
      Результат остатка от деления с допустимыми значениями х=42 у=24 -  {'statusCode': 0, 'result': 18}
      Результат остатка от деления с числом больше диапазона х=42 у=21474836478 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат остатка от деления с числом меньше диапазона х=42 у=-2147483649 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат остатка от деления с дробным числом х=42 у=24.5 -  {'statusCode': 3, 'statusMessage': 'Значения параметров должны быть целыми'}
      Результат остатка от деления пограничных чисел х=-2147483648 у=21474836447 -  {'statusCode': 4, 'statusMessage': 'Превышены максимальные значения параметров'}
      Результат остатка от деления чисел меньше предела х=-2147483647 у=2147483646 -  {'statusCode': 0, 'result': 2147483645}
      Результат остатка от деления ноль х=42 у=0 -  {'statusCode': 8, 'statusMessage': 'Ошибка вычисления'}
      Согласно мануалу статус код для ошибки вычисления должен быть 1
      .
      
      <<Попытка отправить post-запрос к задаче типа get>>
      
      
      Попытка отправить post-запрос к задаче типа get -  {'statusCode': 5, 'statusMessage': ' state - Не верное имя задачи или тип HTTP запроса'}
      Попытка отправить get-запрос к задаче типа post -  {'statusCode': 5, 'statusMessage': ': addition - Не верное имя задачи или тип HTTP запроса'}
      Попытка отправить post-запрос без значений  -  {'statusCode': 5, 'statusMessage': ': addition - Не верное имя задачи или тип HTTP запроса'}
      Попытка отправить post-запрос без значения y  -  {'statusCode': 5, 'statusMessage': ': addition - Не верное имя задачи или тип HTTP запроса'}
      Пытаемся остановить Веб-калькулятор
      Веб-калькулятор остановлен
      .
      
      ========================================================================================================= 7 passed in 45.83s ==========================================================================================================
      
      
      
      
      
      
      
      
